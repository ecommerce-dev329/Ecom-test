{{ 'product-real-result.css' | asset_url | stylesheet_tag }}

{%- style -%}
  {% for block in section.blocks %}
    .result-item-{{ forloop.index }} {
      top: {{ block.settings.point_pos__y }}%;
      left: {{ block.settings.point_pos__x }}%;
      z-index: {{ forloop.length | minus: forloop.index }};
    }
  {% endfor %}
{%- endstyle -%}

<div class="section-product-real-result page-width">
  <div class="heading-wrapper">
    <h2>{{ section.settings.heading }}</h2>
  </div>
  <div class="result-wrapper">
    <div class="result-with-image-wrapper">
      {{ section.settings.result_image | image_url: width: 800 | image_tag: alt: 'Product Real Result Image', loading: 'lazy' }}
      {%- if section.blocks != blank -%}
        {% for block in section.blocks %}
          <div class="result-item result-item-{{ forloop.index }}">
            <div class="result-item-point" data-index="{{ forloop.index }}">+</div>
            <div class="result-item-content-wrapper">
              <div class="result-item-title">{{ block.settings.result_title }}</div>
              <div class="result-item-content">{{ block.settings.result_content }}</div>
            </div>
          </div>
        {% endfor %}
      {%- endif -%}
    </div>
    {%- if section.blocks != blank -%}
      <div class="result-bottom-item-wrapper">
        {% for block in section.blocks %}
          <div class="result-bottom-item">
            <div class="result-bottom-title">{{ block.settings.result_title }}</div>
            <div class="result-bottom-content">{{ block.settings.result_content }}</div>
          </div>
        {% endfor %}
      </div>
    {%- endif -%}
  </div>
</div>

{{ 'product-real-result.js' | asset_url | script_tag }}

{% schema %}
  {
    "name": "t:sections.product-real-result.name",
    "tag": "section",
    "class": "product-real-result",
    "settings": [
      {
        "type": "header",
        "content": "t:sections.product-real-result.settings.header__1.content"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "t:sections.product-real-result.settings.heading_label.label",
        "default": "t:sections.product-real-result.settings.heading_label.default"
      },
      {
        "type": "select",
        "id": "heading_alignment",
        "options": [
          {
            "value": "left",
            "label": "t:sections.product-real-result.settings.heading_alignment.options.option_1.label"
          }, {
            "value": "center",
            "label": "t:sections.product-real-result.settings.heading_alignment.options.option_2.label"
          }, {
            "value": "right",
            "label": "t:sections.product-real-result.settings.heading_alignment.options.option_3.label"
          }
        ],
        "label": "t:sections.product-real-result.settings.heading_alignment.label",
        "default": "center"
      },
      {
        "type": "header",
        "content": "t:sections.product-real-result.settings.header__2.content"
      }, {
        "type": "image_picker",
        "id": "result_image",
        "label": "t:sections.product-real-result.settings.result_image.label",
        "info": "t:sections.product-real-result.settings.result_image.info"
      }
    ],
    "blocks": [
      {
        "name": "t:sections.product-real-result.blocks.name",
        "type": "real_result",
        "limit": 5,
        "settings": [
          {
            "type": "text",
            "id": "result_title",
            "label": "t:sections.product-real-result.blocks.settings.result_title.label",
            "default": "t:sections.product-real-result.blocks.settings.result_title.default"
          }, {
            "type": "text",
            "id": "result_content",
            "label": "t:sections.product-real-result.blocks.settings.result_content.label",
            "default": "t:sections.product-real-result.blocks.settings.result_content.default"
          }, {
            "type": "range",
            "id": "point_pos__x",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.product-real-result.blocks.settings.point_pos__x.label",
            "default": 50
          }, {
            "type": "range",
            "id": "point_pos__y",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "t:sections.product-real-result.blocks.settings.point_pos__y.label",
            "default": 50
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "t:sections.product-real-result.name",
        "settings": {},
        "blocks": [
          {
            "type": "real_result"
          }, {
            "type": "real_result"
          }, {
            "type": "real_result"
          }
        ]
      }
    ]
  }
{% endschema %}